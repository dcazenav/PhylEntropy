<!DOCTYPE html>
<html lang="en">
 <head>
  <title>Wordcloud</title>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
  <script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script>
  <style>
    html, body, #container {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    }
  </style>
 </head>
  <body>
   <div id="container"></div>
    <script>
        <!-- chart code will be here -->
        var retrievedObject = sessionStorage.getItem('TableauduCSV');

        var test = JSON.parse(retrievedObject)
        var damienitem = JSON.parse(retrievedObject).length
        var typo = [];
        var countrymen = [];
        var dataset1 = [];
        var number = [142297, 272200, 285511, 310924, 312368, 336490, 400272, 424141, 549956, 557211, 659606, 785194, 903406, 975969];
        // set the data
        anychart.onDocumentReady(function() {
         for(var i = damienitem-2; i < damienitem; i ++) {

          for (var j = 0; j < damienitem; j++) {
           if (i = damienitem-2){
            typo.push(test[i][j]) ;
            console.log("Type: " + typo[i]) ;
           }if (i = damienitem-1){
            countrymen.push(test[i][j]) ;
            console.log("Country: " + countrymen[i])
           }

           //Object of object dataset pour remplacer data
           var dataset = {};
           dataset["x"] = typo[j];
           dataset["value"] = number[j];
           dataset["category"] = countrymen[j];

           dataset1.push(dataset);


          }
         }


          var data = [
            {"x": "Mandarin chinese", "value": 1090000000, category: "Sino-Tibetan"},
            {"x": "English", "value": 983000000, category: "Indo-European"},
            {"x": "Hindustani", "value": 544000000, category: "Indo-European"},
            {"x": "Spanish", "value": 527000000, category: "Indo-European"},
            {"x": "Arabic", "value": 422000000, category: "Afro-Asiatic"},
            {"x": "Malay", "value": 281000000, category: "Austronesian"},
            {"x": "Russian", "value": 267000000, category: "Indo-European"},
            {"x": "Bengali", "value": 261000000, category: "Indo-European"},
            {"x": "Portuguese", "value": 229000000, category: "Indo-European"},
            {"x": "French", "value": 229000000, category: "Indo-European"},
            {"x": "Hausa", "value": 150000000, category: "Afro-Asiatic"},
            {"x": "Punjabi", "value": 148000000, category: "Indo-European"},
            {"x": "Japanese", "value": 129000000, category: "Japonic"},
            {"x": "German", "value": 129000000, category: "Indo-European"},
            {"x": "Persian", "value": 121000000, category: "Indo-European"}
          ];

         // create a tag (word) cloud chart
          //var chart = anychart.tagCloud(data);
         var chart = anychart.tagCloud(dataset1);

           // set a chart title
          chart.title('15 most spoken languages')
          // set an array of angles at which the words will be laid out
          chart.angles([0])
          // enable a color range
          chart.colorRange(true);
          // set the color range length
          chart.colorRange().length('80%');

          // display the word cloud chart
          chart.container("container");
          chart.draw();
        });

    </script>
  </body>
</html>